@{
    ViewData["Title"] = "Home Page";
    Layout = null;
}

<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script src="js/jput.min.js"></script>

<div class="text-center">
    <h1 class="display-4">Find the prime factorization of a number</h1>
    <input type="number" id="inputNum" />
    <input type="button" id="btnSubmit" value="Submit" onclick="btnSubmitClick()" />

    <table id="tblResult">
    </table>
</div>



<script>
    function btnSubmitClick() {
        var number = $("#inputNum").val();
        if (Number.isInteger(Number(number)) && number != null && number != '') {
            getFactorization(number);
        }
        else {
            alert("Entered number cannot be blank and must be an integer");
        }
    }

    function getFactorization(number) {
        var numToFactorize = { Value: number };
        $.ajax({
            url: "/Home/GetFactorization",
            method: "POST",
            dataType: "JSON",
            data: { numToFactorize: JSON.stringify(numToFactorize) },
            success: function(data) {
                //alert(data);
                //debugger;
                $("#tblResult tr").remove();
                data.forEach(fillTable);
                addTableHeader(number);

            },
            error: function(response) {
                debugger;
                console.error("error");
            }
        })
    }

    function fillTable(i) {
        if (i != null && i != "") {
            var table = document.getElementById("tblResult");
            var row = table.insertRow(0);
            var cell1 = row.insertCell(0);
            cell1.innerHTML = i;
        }
    }
    function addTableHeader(number) {
        var table = document.getElementById("tblResult");
        var header = table.createTHead();
        var row = header.insertRow(0);
        var cell = row.insertCell(0);
        cell.innerHTML = "<b>Prime Factors of " + number + "</b>";
    }
</script>

<style>
    table, th, td {
        border: 1px solid;
    }
</style>